{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":69,"index":110}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"getDeviceId\", {\n    enumerable: true,\n    get: function () {\n      return getDeviceId;\n    }\n  });\n  Object.defineProperty(exports, \"trackEvent\", {\n    enumerable: true,\n    get: function () {\n      return trackEvent;\n    }\n  });\n  Object.defineProperty(exports, \"trackAppOpen\", {\n    enumerable: true,\n    get: function () {\n      return trackAppOpen;\n    }\n  });\n  Object.defineProperty(exports, \"trackAdClick\", {\n    enumerable: true,\n    get: function () {\n      return trackAdClick;\n    }\n  });\n  Object.defineProperty(exports, \"trackAffiliateClick\", {\n    enumerable: true,\n    get: function () {\n      return trackAffiliateClick;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoVirtualEnv = require(_dependencyMap[1], \"expo/virtual/env\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[3], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  var DEVICE_ID_KEY = \"@optical_rx_device_id\";\n\n  // Generate or retrieve a persistent device ID\n  var getDeviceId = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* () {\n      try {\n        var deviceId = yield AsyncStorage.default.getItem(DEVICE_ID_KEY);\n        if (!deviceId) {\n          // Generate a unique ID for this device\n          deviceId = `${_reactNative.Platform.OS}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n          yield AsyncStorage.default.setItem(DEVICE_ID_KEY, deviceId);\n        }\n        return deviceId;\n      } catch {\n        return `temp-${Date.now()}`;\n      }\n    });\n    return function getDeviceId() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  // Track analytics event\n  var trackEvent = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator.default)(function* (eventType, metadata) {\n      try {\n        var deviceId = yield getDeviceId();\n        var platform = _reactNative.Platform.OS; // 'ios', 'android', or 'web'\n\n        yield fetch(`${BACKEND_URL}/api/analytics/track`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            device_id: deviceId,\n            event_type: eventType,\n            platform: platform,\n            app_version: \"1.0.0\",\n            metadata: metadata\n          })\n        });\n      } catch (error) {\n        // Silently fail - don't interrupt user experience\n        console.log(\"Analytics error:\", error);\n      }\n    });\n    return function trackEvent(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  // Track app open (call on app launch)\n  var trackAppOpen = () => trackEvent(\"app_open\");\n\n  // Track ad click\n  var trackAdClick = adId => trackEvent(\"ad_click\", {\n    ad_id: adId\n  });\n\n  // Track affiliate click\n  var trackAffiliateClick = partnerId => trackEvent(\"affiliate_click\", {\n    partner_id: partnerId\n  });\n});","lineCount":113,"map":[[12,2,8,0,"Object"],[12,8,8,0],[12,9,8,0,"defineProperty"],[12,23,8,0],[12,24,8,0,"exports"],[12,31,8,0],[13,4,8,0,"enumerable"],[13,14,8,0],[14,4,8,0,"get"],[14,7,8,0],[14,18,8,0,"get"],[14,19,8,0],[15,6,8,0],[15,13,8,0,"getDeviceId"],[15,24,8,0],[16,4,8,0],[17,2,8,0],[18,2,23,0,"Object"],[18,8,23,0],[18,9,23,0,"defineProperty"],[18,23,23,0],[18,24,23,0,"exports"],[18,31,23,0],[19,4,23,0,"enumerable"],[19,14,23,0],[20,4,23,0,"get"],[20,7,23,0],[20,18,23,0,"get"],[20,19,23,0],[21,6,23,0],[21,13,23,0,"trackEvent"],[21,23,23,0],[22,4,23,0],[23,2,23,0],[24,2,49,0,"Object"],[24,8,49,0],[24,9,49,0,"defineProperty"],[24,23,49,0],[24,24,49,0,"exports"],[24,31,49,0],[25,4,49,0,"enumerable"],[25,14,49,0],[26,4,49,0,"get"],[26,7,49,0],[26,18,49,0,"get"],[26,19,49,0],[27,6,49,0],[27,13,49,0,"trackAppOpen"],[27,25,49,0],[28,4,49,0],[29,2,49,0],[30,2,52,0,"Object"],[30,8,52,0],[30,9,52,0,"defineProperty"],[30,23,52,0],[30,24,52,0,"exports"],[30,31,52,0],[31,4,52,0,"enumerable"],[31,14,52,0],[32,4,52,0,"get"],[32,7,52,0],[32,18,52,0,"get"],[32,19,52,0],[33,6,52,0],[33,13,52,0,"trackAdClick"],[33,25,52,0],[34,4,52,0],[35,2,52,0],[36,2,55,0,"Object"],[36,8,55,0],[36,9,55,0,"defineProperty"],[36,23,55,0],[36,24,55,0,"exports"],[36,31,55,0],[37,4,55,0,"enumerable"],[37,14,55,0],[38,4,55,0,"get"],[38,7,55,0],[38,18,55,0,"get"],[38,19,55,0],[39,6,55,0],[39,13,55,0,"trackAffiliateClick"],[39,32,55,0],[40,4,55,0],[41,2,55,0],[42,2,56,59],[42,6,56,59,"_babelRuntimeHelpersAsyncToGenerator"],[42,42,56,59],[42,45,56,59,"require"],[42,52,56,59],[42,53,56,59,"_dependencyMap"],[42,67,56,59],[43,2,56,59],[43,6,56,59,"_asyncToGenerator"],[43,23,56,59],[43,26,56,59,"_interopDefault"],[43,41,56,59],[43,42,56,59,"_babelRuntimeHelpersAsyncToGenerator"],[43,78,56,59],[44,2,56,59],[44,6,56,59,"_expoVirtualEnv"],[44,21,56,59],[44,24,56,59,"require"],[44,31,56,59],[44,32,56,59,"_dependencyMap"],[44,46,56,59],[45,2,1,0],[45,6,1,0,"_reactNative"],[45,18,1,0],[45,21,1,0,"require"],[45,28,1,0],[45,29,1,0,"_dependencyMap"],[45,43,1,0],[46,2,2,0],[46,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[46,42,2,0],[46,45,2,0,"require"],[46,52,2,0],[46,53,2,0,"_dependencyMap"],[46,67,2,0],[47,2,2,0],[47,6,2,0,"AsyncStorage"],[47,18,2,0],[47,21,2,0,"_interopDefault"],[47,36,2,0],[47,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[47,73,2,0],[48,2,4,0],[48,6,4,6,"BACKEND_URL"],[48,17,4,17],[48,20,4,17,"_expoVirtualEnv"],[48,35,4,17],[48,36,4,17,"env"],[48,39,4,17],[48,40,4,17,"EXPO_PUBLIC_BACKEND_URL"],[48,63,4,55],[49,2,5,0],[49,6,5,6,"DEVICE_ID_KEY"],[49,19,5,19],[49,22,5,22],[49,45,5,45],[51,2,7,0],[52,2,8,7],[52,6,8,13,"getDeviceId"],[52,17,8,24],[53,4,8,24],[53,8,8,24,"_ref"],[53,12,8,24],[53,19,8,24,"_asyncToGenerator"],[53,36,8,24],[53,37,8,24,"default"],[53,44,8,24],[53,46,8,27],[53,59,8,56],[54,6,9,2],[54,10,9,6],[55,8,10,4],[55,12,10,8,"deviceId"],[55,20,10,16],[55,29,10,25,"AsyncStorage"],[55,41,10,37],[55,42,10,37,"default"],[55,49,10,37],[55,50,10,38,"getItem"],[55,57,10,45],[55,58,10,46,"DEVICE_ID_KEY"],[55,71,10,59],[55,72,10,60],[56,8,11,4],[56,12,11,8],[56,13,11,9,"deviceId"],[56,21,11,17],[56,23,11,19],[57,10,12,6],[58,10,13,6,"deviceId"],[58,18,13,14],[58,21,13,17],[58,24,13,20,"Platform"],[58,36,13,28],[58,37,13,28,"Platform"],[58,45,13,28],[58,46,13,29,"OS"],[58,48,13,31],[58,52,13,35,"Date"],[58,56,13,39],[58,57,13,40,"now"],[58,60,13,43],[58,61,13,44],[58,62,13,45],[58,66,13,49,"Math"],[58,70,13,53],[58,71,13,54,"random"],[58,77,13,60],[58,78,13,61],[58,79,13,62],[58,80,13,63,"toString"],[58,88,13,71],[58,89,13,72],[58,91,13,74],[58,92,13,75],[58,93,13,76,"substr"],[58,99,13,82],[58,100,13,83],[58,101,13,84],[58,103,13,86],[58,104,13,87],[58,105,13,88],[58,107,13,90],[59,10,14,6],[59,16,14,12,"AsyncStorage"],[59,28,14,24],[59,29,14,24,"default"],[59,36,14,24],[59,37,14,25,"setItem"],[59,44,14,32],[59,45,14,33,"DEVICE_ID_KEY"],[59,58,14,46],[59,60,14,48,"deviceId"],[59,68,14,56],[59,69,14,57],[60,8,15,4],[61,8,16,4],[61,15,16,11,"deviceId"],[61,23,16,19],[62,6,17,2],[62,7,17,3],[62,8,17,4],[62,14,17,10],[63,8,18,4],[63,15,18,11],[63,23,18,19,"Date"],[63,27,18,23],[63,28,18,24,"now"],[63,31,18,27],[63,32,18,28],[63,33,18,29],[63,35,18,31],[64,6,19,2],[65,4,20,0],[65,5,20,1],[66,4,20,1],[66,20,8,13,"getDeviceId"],[66,31,8,24,"getDeviceId"],[66,32,8,24],[67,6,8,24],[67,13,8,24,"_ref"],[67,17,8,24],[67,18,8,24,"apply"],[67,23,8,24],[67,30,8,24,"arguments"],[67,39,8,24],[68,4,8,24],[69,2,8,24],[69,5,20,1],[71,2,22,0],[72,2,23,7],[72,6,23,13,"trackEvent"],[72,16,23,23],[73,4,23,23],[73,8,23,23,"_ref2"],[73,13,23,23],[73,20,23,23,"_asyncToGenerator"],[73,37,23,23],[73,38,23,23,"default"],[73,45,23,23],[73,47,23,26],[73,58,24,2,"eventType"],[73,67,24,56],[73,69,25,2,"metadata"],[73,77,25,32],[73,79,26,5],[74,6,27,2],[74,10,27,6],[75,8,28,4],[75,12,28,10,"deviceId"],[75,20,28,18],[75,29,28,27,"getDeviceId"],[75,40,28,38],[75,41,28,39],[75,42,28,40],[76,8,29,4],[76,12,29,10,"platform"],[76,20,29,18],[76,23,29,21,"Platform"],[76,35,29,29],[76,36,29,29,"Platform"],[76,44,29,29],[76,45,29,30,"OS"],[76,47,29,32],[76,48,29,33],[76,49,29,34],[78,8,31,4],[78,14,31,10,"fetch"],[78,19,31,15],[78,20,31,16],[78,23,31,19,"BACKEND_URL"],[78,34,31,30],[78,56,31,52],[78,58,31,54],[79,10,32,6,"method"],[79,16,32,12],[79,18,32,14],[79,24,32,20],[80,10,33,6,"headers"],[80,17,33,13],[80,19,33,15],[81,12,33,17],[81,26,33,31],[81,28,33,33],[82,10,33,52],[82,11,33,53],[83,10,34,6,"body"],[83,14,34,10],[83,16,34,12,"JSON"],[83,20,34,16],[83,21,34,17,"stringify"],[83,30,34,26],[83,31,34,27],[84,12,35,8,"device_id"],[84,21,35,17],[84,23,35,19,"deviceId"],[84,31,35,27],[85,12,36,8,"event_type"],[85,22,36,18],[85,24,36,20,"eventType"],[85,33,36,29],[86,12,37,8,"platform"],[86,20,37,16],[86,22,37,18,"platform"],[86,30,37,26],[87,12,38,8,"app_version"],[87,23,38,19],[87,25,38,21],[87,32,38,28],[88,12,39,8,"metadata"],[88,20,39,16],[88,22,39,18,"metadata"],[89,10,40,6],[89,11,40,7],[90,8,41,4],[90,9,41,5],[90,10,41,6],[91,6,42,2],[91,7,42,3],[91,8,42,4],[91,15,42,11,"error"],[91,20,42,16],[91,22,42,18],[92,8,43,4],[93,8,44,4,"console"],[93,15,44,11],[93,16,44,12,"log"],[93,19,44,15],[93,20,44,16],[93,38,44,34],[93,40,44,36,"error"],[93,45,44,41],[93,46,44,42],[94,6,45,2],[95,4,46,0],[95,5,46,1],[96,4,46,1],[96,20,23,13,"trackEvent"],[96,30,23,23,"trackEvent"],[96,31,23,23,"_x"],[96,33,23,23],[96,35,23,23,"_x2"],[96,38,23,23],[97,6,23,23],[97,13,23,23,"_ref2"],[97,18,23,23],[97,19,23,23,"apply"],[97,24,23,23],[97,31,23,23,"arguments"],[97,40,23,23],[98,4,23,23],[99,2,23,23],[99,5,46,1],[101,2,48,0],[102,2,49,7],[102,6,49,13,"trackAppOpen"],[102,18,49,25],[102,21,49,28,"trackAppOpen"],[102,22,49,28],[102,27,49,34,"trackEvent"],[102,37,49,44],[102,38,49,45],[102,48,49,55],[102,49,49,56],[104,2,51,0],[105,2,52,7],[105,6,52,13,"trackAdClick"],[105,18,52,25],[105,21,52,29,"adId"],[105,25,52,42],[105,29,52,47,"trackEvent"],[105,39,52,57],[105,40,52,58],[105,50,52,68],[105,52,52,70],[106,4,52,72,"ad_id"],[106,9,52,77],[106,11,52,79,"adId"],[107,2,52,84],[107,3,52,85],[107,4,52,86],[109,2,54,0],[110,2,55,7],[110,6,55,13,"trackAffiliateClick"],[110,25,55,32],[110,28,55,36,"partnerId"],[110,37,55,53],[110,41,56,2,"trackEvent"],[110,51,56,12],[110,52,56,13],[110,69,56,30],[110,71,56,32],[111,4,56,34,"partner_id"],[111,14,56,44],[111,16,56,46,"partnerId"],[112,2,56,56],[112,3,56,57],[112,4,56,58],[113,0,56,59],[113,3]],"functionMap":{"names":["<global>","getDeviceId","trackEvent","trackAppOpen","trackAdClick","trackAffiliateClick"],"mappings":"AAA;2BCO;CDY;0BEG;CFuB;4BGG,4BH;4BIG,0DJ;mCKG;0DLC"},"hasCjsExports":false},"type":"js/module"}]}