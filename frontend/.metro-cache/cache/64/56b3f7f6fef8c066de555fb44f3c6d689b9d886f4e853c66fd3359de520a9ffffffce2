{"dependencies":[{"name":"expo-text-extractor","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":161},"end":{"line":4,"column":72,"index":233}}],"key":"piTsKFwsZCHgPHqPc1eWPqXhqos=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":234},"end":{"line":5,"column":47,"index":281}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"extractExpiryDateFromImage\", {\n    enumerable: true,\n    get: function () {\n      return extractExpiryDateFromImage;\n    }\n  });\n  var _expoTextExtractor = require(_dependencyMap[0], \"expo-text-extractor\");\n  var _expoFileSystem = require(_dependencyMap[1], \"expo-file-system\");\n  var FileSystem = _interopNamespace(_expoFileSystem);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  // OCR Service using expo-text-extractor (client-side, on-device)\n  // Extracts expiration dates from prescription images using ML Kit (Android) and Vision (iOS)\n\n  // Date patterns to look for in extracted text\n  const DATE_PATTERNS = [\n  // MM/DD/YYYY or M/D/YYYY\n  /(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})/,\n  // MM-DD-YYYY or M-D-YYYY\n  /(\\d{1,2})-(\\d{1,2})-(\\d{4})/,\n  // YYYY-MM-DD\n  /(\\d{4})-(\\d{2})-(\\d{2})/,\n  // Month DD, YYYY or Month DD YYYY\n  /(Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|Jun(?:e)?|Jul(?:y)?|Aug(?:ust)?|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)\\s+(\\d{1,2}),?\\s+(\\d{4})/i];\n\n  // Keywords that indicate expiration date\n  const EXPIRY_KEYWORDS = [/exp(?:iration)?(?:\\s+date)?/i, /expires?/i, /valid\\s+(?:until|thru|through)/i, /good\\s+(?:until|thru|through)/i, /rx\\s+exp/i, /prescription\\s+exp/i];\n  const monthNameToNumber = {\n    january: \"01\",\n    jan: \"01\",\n    february: \"02\",\n    feb: \"02\",\n    march: \"03\",\n    mar: \"03\",\n    april: \"04\",\n    apr: \"04\",\n    may: \"05\",\n    june: \"06\",\n    jun: \"06\",\n    july: \"07\",\n    jul: \"07\",\n    august: \"08\",\n    aug: \"08\",\n    september: \"09\",\n    sep: \"09\",\n    october: \"10\",\n    oct: \"10\",\n    november: \"11\",\n    nov: \"11\",\n    december: \"12\",\n    dec: \"12\"\n  };\n\n  /**\n   * Parse date string to YYYY-MM-DD format\n   */\n  const parseDateToISO = (match, patternIndex) => {\n    try {\n      let year, month, day;\n      if (patternIndex === 0 || patternIndex === 1) {\n        // MM/DD/YYYY or MM-DD-YYYY format (US)\n        month = match[1].padStart(2, \"0\");\n        day = match[2].padStart(2, \"0\");\n        year = match[3];\n      } else if (patternIndex === 2) {\n        // YYYY-MM-DD format\n        year = match[1];\n        month = match[2];\n        day = match[3];\n      } else if (patternIndex === 3) {\n        // Month DD, YYYY format\n        const monthName = match[1].toLowerCase();\n        month = monthNameToNumber[monthName] || monthNameToNumber[monthName.substring(0, 3)] || \"01\";\n        day = match[2].padStart(2, \"0\");\n        year = match[3];\n      } else {\n        return null;\n      }\n\n      // Validate the date\n      const yearNum = parseInt(year);\n      const monthNum = parseInt(month);\n      const dayNum = parseInt(day);\n      if (yearNum < 2020 || yearNum > 2035) return null;\n      if (monthNum < 1 || monthNum > 12) return null;\n      if (dayNum < 1 || dayNum > 31) return null;\n\n      // Check if date is reasonable (within 3 years from now)\n      const date = new Date(yearNum, monthNum - 1, dayNum);\n      const now = new Date();\n      const threeYearsFromNow = new Date(now.getFullYear() + 3, now.getMonth(), now.getDate());\n      const oneYearAgo = new Date(now.getFullYear() - 1, now.getMonth(), now.getDate());\n      if (date < oneYearAgo || date > threeYearsFromNow) return null;\n      return `${year}-${month}-${day}`;\n    } catch {\n      return null;\n    }\n  };\n\n  /**\n   * Find the most likely expiration date from extracted text\n   */\n  const findExpirationDate = textLines => {\n    const fullText = textLines.join(\" \").replace(/\\s+/g, \" \");\n    console.log(\"OCR extracted text:\", fullText);\n\n    // First, look for dates near expiry keywords\n    for (const keyword of EXPIRY_KEYWORDS) {\n      const keywordMatch = fullText.match(keyword);\n      if (keywordMatch) {\n        // Look for a date within 50 characters after the keyword\n        const startIndex = keywordMatch.index || 0;\n        const textAfterKeyword = fullText.substring(startIndex, startIndex + 50);\n        for (let i = 0; i < DATE_PATTERNS.length; i++) {\n          const dateMatch = textAfterKeyword.match(DATE_PATTERNS[i]);\n          if (dateMatch) {\n            const isoDate = parseDateToISO(dateMatch, i);\n            if (isoDate) {\n              console.log(`Found expiry date near keyword \"${keywordMatch[0]}\": ${isoDate}`);\n              return isoDate;\n            }\n          }\n        }\n      }\n    }\n\n    // If no keyword-associated date found, look for any date that looks like an expiration\n    // (typically 1-2 years in the future)\n    const allDates = [];\n    for (let i = 0; i < DATE_PATTERNS.length; i++) {\n      const regex = new RegExp(DATE_PATTERNS[i], \"gi\");\n      let match;\n      while ((match = regex.exec(fullText)) !== null) {\n        const isoDate = parseDateToISO(match, i);\n        if (isoDate) {\n          const date = new Date(isoDate);\n          const now = new Date();\n          const monthsFromNow = (date.getFullYear() - now.getFullYear()) * 12 + (date.getMonth() - now.getMonth());\n\n          // Score based on how likely this is to be an expiry date\n          // Dates 6-24 months from now are most likely expiry dates\n          let score = 0;\n          if (monthsFromNow >= 6 && monthsFromNow <= 24) {\n            score = 100;\n          } else if (monthsFromNow > 0 && monthsFromNow < 36) {\n            score = 50;\n          } else if (monthsFromNow >= 0) {\n            score = 10;\n          }\n          if (score > 0) {\n            allDates.push({\n              date: isoDate,\n              score\n            });\n          }\n        }\n      }\n    }\n\n    // Return the highest scored date\n    if (allDates.length > 0) {\n      allDates.sort((a, b) => b.score - a.score);\n      console.log(\"Found potential expiry dates:\", allDates);\n      return allDates[0].date;\n    }\n    return null;\n  };\n\n  /**\n   * Save base64 image to a temporary file and return the URI\n   */\n  const saveBase64ToTempFile = async base64Data => {\n    // Clean up base64 string\n    let cleanBase64 = base64Data;\n    if (cleanBase64.includes(\",\")) {\n      cleanBase64 = cleanBase64.split(\",\")[1];\n    }\n    const fileName = `prescription_${Date.now()}.jpg`;\n    const filePath = `${FileSystem.cacheDirectory}${fileName}`;\n    await FileSystem.writeAsStringAsync(filePath, cleanBase64, {\n      encoding: FileSystem.EncodingType.Base64\n    });\n    return filePath;\n  };\n\n  /**\n   * Extract expiration date from a prescription image using on-device OCR\n   */\n  const extractExpiryDateFromImage = async imageBase64 => {\n    try {\n      // Check if OCR is supported on this device\n      if (!_expoTextExtractor.isSupported) {\n        console.log(\"OCR not supported on this device/platform\");\n        return {\n          success: false,\n          expiryDate: null,\n          message: Platform.default.OS === \"web\" ? \"OCR is not available in web preview. Please use the mobile app to scan prescriptions.\" : \"OCR is not supported on this device. Please enter the expiration date manually.\"\n        };\n      }\n\n      // Save base64 to temporary file\n      const tempFilePath = await saveBase64ToTempFile(imageBase64);\n      console.log(\"Running OCR on image:\", tempFilePath);\n\n      // Extract text from image\n      const extractedLines = await (0, _expoTextExtractor.extractTextFromImage)(tempFilePath);\n\n      // Clean up temp file\n      try {\n        await FileSystem.deleteAsync(tempFilePath, {\n          idempotent: true\n        });\n      } catch {\n        // Ignore cleanup errors\n      }\n      if (!extractedLines || extractedLines.length === 0) {\n        return {\n          success: false,\n          expiryDate: null,\n          message: \"No text found in the image. Please enter the expiration date manually.\",\n          rawText: \"\"\n        };\n      }\n      const rawText = extractedLines.join(\"\\n\");\n      console.log(\"OCR extracted lines:\", extractedLines);\n\n      // Find expiration date in extracted text\n      const expiryDate = findExpirationDate(extractedLines);\n      if (expiryDate) {\n        return {\n          success: true,\n          expiryDate,\n          message: \"Expiration date detected successfully!\",\n          rawText\n        };\n      }\n      return {\n        success: false,\n        expiryDate: null,\n        message: \"No expiration date found in the image. Please enter it manually.\",\n        rawText\n      };\n    } catch (error) {\n      console.log(\"OCR extraction error:\", error);\n      return {\n        success: false,\n        expiryDate: null,\n        message: \"Error analyzing image. Please enter the expiration date manually.\"\n      };\n    }\n  };\n});","lineCount":278,"map":[[27,2,197,0,"Object"],[27,8,197,0],[27,9,197,0,"defineProperty"],[27,23,197,0],[27,24,197,0,"exports"],[27,31,197,0],[28,4,197,0,"enumerable"],[28,14,197,0],[29,4,197,0,"get"],[29,7,197,0],[29,18,197,0,"get"],[29,19,197,0],[30,6,197,0],[30,13,197,0,"extractExpiryDateFromImage"],[30,39,197,0],[31,4,197,0],[32,2,197,0],[33,2,4,0],[33,6,4,0,"_expoTextExtractor"],[33,24,4,0],[33,27,4,0,"require"],[33,34,4,0],[33,35,4,0,"_dependencyMap"],[33,49,4,0],[34,2,5,0],[34,6,5,0,"_expoFileSystem"],[34,21,5,0],[34,24,5,0,"require"],[34,31,5,0],[34,32,5,0,"_dependencyMap"],[34,46,5,0],[35,2,5,0],[35,6,5,0,"FileSystem"],[35,16,5,0],[35,19,5,0,"_interopNamespace"],[35,36,5,0],[35,37,5,0,"_expoFileSystem"],[35,52,5,0],[36,2,5,47],[36,6,5,47,"_reactNativeWebDistExportsPlatform"],[36,40,5,47],[36,43,5,47,"require"],[36,50,5,47],[36,51,5,47,"_dependencyMap"],[36,65,5,47],[37,2,5,47],[37,6,5,47,"Platform"],[37,14,5,47],[37,17,5,47,"_interopDefault"],[37,32,5,47],[37,33,5,47,"_reactNativeWebDistExportsPlatform"],[37,67,5,47],[38,2,1,0],[39,2,2,0],[41,2,15,0],[42,2,16,0],[42,8,16,6,"DATE_PATTERNS"],[42,21,16,19],[42,24,16,22],[43,2,17,2],[44,2,18,2],[44,33,18,33],[45,2,19,2],[46,2,20,2],[46,31,20,31],[47,2,21,2],[48,2,22,2],[48,27,22,27],[49,2,23,2],[50,2,24,2],[50,171,24,171],[50,172,25,1],[52,2,27,0],[53,2,28,0],[53,8,28,6,"EXPIRY_KEYWORDS"],[53,23,28,21],[53,26,28,24],[53,27,29,2],[53,57,29,32],[53,59,30,2],[53,70,30,13],[53,72,31,2],[53,105,31,35],[53,107,32,2],[53,139,32,34],[53,141,33,2],[53,152,33,13],[53,154,34,2],[53,175,34,23],[53,176,35,1],[54,2,37,0],[54,8,37,6,"monthNameToNumber"],[54,25,37,50],[54,28,37,53],[55,4,38,2,"january"],[55,11,38,9],[55,13,38,11],[55,17,38,15],[56,4,38,17,"jan"],[56,7,38,20],[56,9,38,22],[56,13,38,26],[57,4,39,2,"february"],[57,12,39,10],[57,14,39,12],[57,18,39,16],[58,4,39,18,"feb"],[58,7,39,21],[58,9,39,23],[58,13,39,27],[59,4,40,2,"march"],[59,9,40,7],[59,11,40,9],[59,15,40,13],[60,4,40,15,"mar"],[60,7,40,18],[60,9,40,20],[60,13,40,24],[61,4,41,2,"april"],[61,9,41,7],[61,11,41,9],[61,15,41,13],[62,4,41,15,"apr"],[62,7,41,18],[62,9,41,20],[62,13,41,24],[63,4,42,2,"may"],[63,7,42,5],[63,9,42,7],[63,13,42,11],[64,4,43,2,"june"],[64,8,43,6],[64,10,43,8],[64,14,43,12],[65,4,43,14,"jun"],[65,7,43,17],[65,9,43,19],[65,13,43,23],[66,4,44,2,"july"],[66,8,44,6],[66,10,44,8],[66,14,44,12],[67,4,44,14,"jul"],[67,7,44,17],[67,9,44,19],[67,13,44,23],[68,4,45,2,"august"],[68,10,45,8],[68,12,45,10],[68,16,45,14],[69,4,45,16,"aug"],[69,7,45,19],[69,9,45,21],[69,13,45,25],[70,4,46,2,"september"],[70,13,46,11],[70,15,46,13],[70,19,46,17],[71,4,46,19,"sep"],[71,7,46,22],[71,9,46,24],[71,13,46,28],[72,4,47,2,"october"],[72,11,47,9],[72,13,47,11],[72,17,47,15],[73,4,47,17,"oct"],[73,7,47,20],[73,9,47,22],[73,13,47,26],[74,4,48,2,"november"],[74,12,48,10],[74,14,48,12],[74,18,48,16],[75,4,48,18,"nov"],[75,7,48,21],[75,9,48,23],[75,13,48,27],[76,4,49,2,"december"],[76,12,49,10],[76,14,49,12],[76,18,49,16],[77,4,49,18,"dec"],[77,7,49,21],[77,9,49,23],[78,2,50,0],[78,3,50,1],[80,2,52,0],[81,0,53,0],[82,0,54,0],[83,2,55,0],[83,8,55,6,"parseDateToISO"],[83,22,55,20],[83,25,55,23,"parseDateToISO"],[83,26,55,24,"match"],[83,31,55,47],[83,33,55,49,"patternIndex"],[83,45,55,69],[83,50,55,89],[84,4,56,2],[84,8,56,6],[85,6,57,4],[85,10,57,8,"year"],[85,14,57,20],[85,16,57,22,"month"],[85,21,57,35],[85,23,57,37,"day"],[85,26,57,48],[86,6,59,4],[86,10,59,8,"patternIndex"],[86,22,59,20],[86,27,59,25],[86,28,59,26],[86,32,59,30,"patternIndex"],[86,44,59,42],[86,49,59,47],[86,50,59,48],[86,52,59,50],[87,8,60,6],[88,8,61,6,"month"],[88,13,61,11],[88,16,61,14,"match"],[88,21,61,19],[88,22,61,20],[88,23,61,21],[88,24,61,22],[88,25,61,23,"padStart"],[88,33,61,31],[88,34,61,32],[88,35,61,33],[88,37,61,35],[88,40,61,38],[88,41,61,39],[89,8,62,6,"day"],[89,11,62,9],[89,14,62,12,"match"],[89,19,62,17],[89,20,62,18],[89,21,62,19],[89,22,62,20],[89,23,62,21,"padStart"],[89,31,62,29],[89,32,62,30],[89,33,62,31],[89,35,62,33],[89,38,62,36],[89,39,62,37],[90,8,63,6,"year"],[90,12,63,10],[90,15,63,13,"match"],[90,20,63,18],[90,21,63,19],[90,22,63,20],[90,23,63,21],[91,6,64,4],[91,7,64,5],[91,13,64,11],[91,17,64,15,"patternIndex"],[91,29,64,27],[91,34,64,32],[91,35,64,33],[91,37,64,35],[92,8,65,6],[93,8,66,6,"year"],[93,12,66,10],[93,15,66,13,"match"],[93,20,66,18],[93,21,66,19],[93,22,66,20],[93,23,66,21],[94,8,67,6,"month"],[94,13,67,11],[94,16,67,14,"match"],[94,21,67,19],[94,22,67,20],[94,23,67,21],[94,24,67,22],[95,8,68,6,"day"],[95,11,68,9],[95,14,68,12,"match"],[95,19,68,17],[95,20,68,18],[95,21,68,19],[95,22,68,20],[96,6,69,4],[96,7,69,5],[96,13,69,11],[96,17,69,15,"patternIndex"],[96,29,69,27],[96,34,69,32],[96,35,69,33],[96,37,69,35],[97,8,70,6],[98,8,71,6],[98,14,71,12,"monthName"],[98,23,71,21],[98,26,71,24,"match"],[98,31,71,29],[98,32,71,30],[98,33,71,31],[98,34,71,32],[98,35,71,33,"toLowerCase"],[98,46,71,44],[98,47,71,45],[98,48,71,46],[99,8,72,6,"month"],[99,13,72,11],[99,16,72,14,"monthNameToNumber"],[99,33,72,31],[99,34,72,32,"monthName"],[99,43,72,41],[99,44,72,42],[99,48,72,46,"monthNameToNumber"],[99,65,72,63],[99,66,72,64,"monthName"],[99,75,72,73],[99,76,72,74,"substring"],[99,85,72,83],[99,86,72,84],[99,87,72,85],[99,89,72,87],[99,90,72,88],[99,91,72,89],[99,92,72,90],[99,96,72,94],[99,100,72,98],[100,8,73,6,"day"],[100,11,73,9],[100,14,73,12,"match"],[100,19,73,17],[100,20,73,18],[100,21,73,19],[100,22,73,20],[100,23,73,21,"padStart"],[100,31,73,29],[100,32,73,30],[100,33,73,31],[100,35,73,33],[100,38,73,36],[100,39,73,37],[101,8,74,6,"year"],[101,12,74,10],[101,15,74,13,"match"],[101,20,74,18],[101,21,74,19],[101,22,74,20],[101,23,74,21],[102,6,75,4],[102,7,75,5],[102,13,75,11],[103,8,76,6],[103,15,76,13],[103,19,76,17],[104,6,77,4],[106,6,79,4],[107,6,80,4],[107,12,80,10,"yearNum"],[107,19,80,17],[107,22,80,20,"parseInt"],[107,30,80,28],[107,31,80,29,"year"],[107,35,80,33],[107,36,80,34],[108,6,81,4],[108,12,81,10,"monthNum"],[108,20,81,18],[108,23,81,21,"parseInt"],[108,31,81,29],[108,32,81,30,"month"],[108,37,81,35],[108,38,81,36],[109,6,82,4],[109,12,82,10,"dayNum"],[109,18,82,16],[109,21,82,19,"parseInt"],[109,29,82,27],[109,30,82,28,"day"],[109,33,82,31],[109,34,82,32],[110,6,84,4],[110,10,84,8,"yearNum"],[110,17,84,15],[110,20,84,18],[110,24,84,22],[110,28,84,26,"yearNum"],[110,35,84,33],[110,38,84,36],[110,42,84,40],[110,44,84,42],[110,51,84,49],[110,55,84,53],[111,6,85,4],[111,10,85,8,"monthNum"],[111,18,85,16],[111,21,85,19],[111,22,85,20],[111,26,85,24,"monthNum"],[111,34,85,32],[111,37,85,35],[111,39,85,37],[111,41,85,39],[111,48,85,46],[111,52,85,50],[112,6,86,4],[112,10,86,8,"dayNum"],[112,16,86,14],[112,19,86,17],[112,20,86,18],[112,24,86,22,"dayNum"],[112,30,86,28],[112,33,86,31],[112,35,86,33],[112,37,86,35],[112,44,86,42],[112,48,86,46],[114,6,88,4],[115,6,89,4],[115,12,89,10,"date"],[115,16,89,14],[115,19,89,17],[115,23,89,21,"Date"],[115,27,89,25],[115,28,89,26,"yearNum"],[115,35,89,33],[115,37,89,35,"monthNum"],[115,45,89,43],[115,48,89,46],[115,49,89,47],[115,51,89,49,"dayNum"],[115,57,89,55],[115,58,89,56],[116,6,90,4],[116,12,90,10,"now"],[116,15,90,13],[116,18,90,16],[116,22,90,20,"Date"],[116,26,90,24],[116,27,90,25],[116,28,90,26],[117,6,91,4],[117,12,91,10,"threeYearsFromNow"],[117,29,91,27],[117,32,91,30],[117,36,91,34,"Date"],[117,40,91,38],[117,41,91,39,"now"],[117,44,91,42],[117,45,91,43,"getFullYear"],[117,56,91,54],[117,57,91,55],[117,58,91,56],[117,61,91,59],[117,62,91,60],[117,64,91,62,"now"],[117,67,91,65],[117,68,91,66,"getMonth"],[117,76,91,74],[117,77,91,75],[117,78,91,76],[117,80,91,78,"now"],[117,83,91,81],[117,84,91,82,"getDate"],[117,91,91,89],[117,92,91,90],[117,93,91,91],[117,94,91,92],[118,6,92,4],[118,12,92,10,"oneYearAgo"],[118,22,92,20],[118,25,92,23],[118,29,92,27,"Date"],[118,33,92,31],[118,34,92,32,"now"],[118,37,92,35],[118,38,92,36,"getFullYear"],[118,49,92,47],[118,50,92,48],[118,51,92,49],[118,54,92,52],[118,55,92,53],[118,57,92,55,"now"],[118,60,92,58],[118,61,92,59,"getMonth"],[118,69,92,67],[118,70,92,68],[118,71,92,69],[118,73,92,71,"now"],[118,76,92,74],[118,77,92,75,"getDate"],[118,84,92,82],[118,85,92,83],[118,86,92,84],[118,87,92,85],[119,6,94,4],[119,10,94,8,"date"],[119,14,94,12],[119,17,94,15,"oneYearAgo"],[119,27,94,25],[119,31,94,29,"date"],[119,35,94,33],[119,38,94,36,"threeYearsFromNow"],[119,55,94,53],[119,57,94,55],[119,64,94,62],[119,68,94,66],[120,6,96,4],[120,13,96,11],[120,16,96,14,"year"],[120,20,96,18],[120,24,96,22,"month"],[120,29,96,27],[120,33,96,31,"day"],[120,36,96,34],[120,38,96,36],[121,4,97,2],[121,5,97,3],[121,6,97,4],[121,12,97,10],[122,6,98,4],[122,13,98,11],[122,17,98,15],[123,4,99,2],[124,2,100,0],[124,3,100,1],[126,2,102,0],[127,0,103,0],[128,0,104,0],[129,2,105,0],[129,8,105,6,"findExpirationDate"],[129,26,105,24],[129,29,105,28,"textLines"],[129,38,105,47],[129,42,105,67],[130,4,106,2],[130,10,106,8,"fullText"],[130,18,106,16],[130,21,106,19,"textLines"],[130,30,106,28],[130,31,106,29,"join"],[130,35,106,33],[130,36,106,34],[130,39,106,37],[130,40,106,38],[130,41,106,39,"replace"],[130,48,106,46],[130,49,106,47],[130,55,106,53],[130,57,106,55],[130,60,106,58],[130,61,106,59],[131,4,108,2,"console"],[131,11,108,9],[131,12,108,10,"log"],[131,15,108,13],[131,16,108,14],[131,37,108,35],[131,39,108,37,"fullText"],[131,47,108,45],[131,48,108,46],[133,4,110,2],[134,4,111,2],[134,9,111,7],[134,15,111,13,"keyword"],[134,22,111,20],[134,26,111,24,"EXPIRY_KEYWORDS"],[134,41,111,39],[134,43,111,41],[135,6,112,4],[135,12,112,10,"keywordMatch"],[135,24,112,22],[135,27,112,25,"fullText"],[135,35,112,33],[135,36,112,34,"match"],[135,41,112,39],[135,42,112,40,"keyword"],[135,49,112,47],[135,50,112,48],[136,6,113,4],[136,10,113,8,"keywordMatch"],[136,22,113,20],[136,24,113,22],[137,8,114,6],[138,8,115,6],[138,14,115,12,"startIndex"],[138,24,115,22],[138,27,115,25,"keywordMatch"],[138,39,115,37],[138,40,115,38,"index"],[138,45,115,43],[138,49,115,47],[138,50,115,48],[139,8,116,6],[139,14,116,12,"textAfterKeyword"],[139,30,116,28],[139,33,116,31,"fullText"],[139,41,116,39],[139,42,116,40,"substring"],[139,51,116,49],[139,52,116,50,"startIndex"],[139,62,116,60],[139,64,116,62,"startIndex"],[139,74,116,72],[139,77,116,75],[139,79,116,77],[139,80,116,78],[140,8,118,6],[140,13,118,11],[140,17,118,15,"i"],[140,18,118,16],[140,21,118,19],[140,22,118,20],[140,24,118,22,"i"],[140,25,118,23],[140,28,118,26,"DATE_PATTERNS"],[140,41,118,39],[140,42,118,40,"length"],[140,48,118,46],[140,50,118,48,"i"],[140,51,118,49],[140,53,118,51],[140,55,118,53],[141,10,119,8],[141,16,119,14,"dateMatch"],[141,25,119,23],[141,28,119,26,"textAfterKeyword"],[141,44,119,42],[141,45,119,43,"match"],[141,50,119,48],[141,51,119,49,"DATE_PATTERNS"],[141,64,119,62],[141,65,119,63,"i"],[141,66,119,64],[141,67,119,65],[141,68,119,66],[142,10,120,8],[142,14,120,12,"dateMatch"],[142,23,120,21],[142,25,120,23],[143,12,121,10],[143,18,121,16,"isoDate"],[143,25,121,23],[143,28,121,26,"parseDateToISO"],[143,42,121,40],[143,43,121,41,"dateMatch"],[143,52,121,50],[143,54,121,52,"i"],[143,55,121,53],[143,56,121,54],[144,12,122,10],[144,16,122,14,"isoDate"],[144,23,122,21],[144,25,122,23],[145,14,123,12,"console"],[145,21,123,19],[145,22,123,20,"log"],[145,25,123,23],[145,26,123,24],[145,61,123,59,"keywordMatch"],[145,73,123,71],[145,74,123,72],[145,75,123,73],[145,76,123,74],[145,82,123,80,"isoDate"],[145,89,123,87],[145,91,123,89],[145,92,123,90],[146,14,124,12],[146,21,124,19,"isoDate"],[146,28,124,26],[147,12,125,10],[148,10,126,8],[149,8,127,6],[150,6,128,4],[151,4,129,2],[153,4,131,2],[154,4,132,2],[155,4,133,2],[155,10,133,8,"allDates"],[155,18,133,51],[155,21,133,54],[155,23,133,56],[156,4,135,2],[156,9,135,7],[156,13,135,11,"i"],[156,14,135,12],[156,17,135,15],[156,18,135,16],[156,20,135,18,"i"],[156,21,135,19],[156,24,135,22,"DATE_PATTERNS"],[156,37,135,35],[156,38,135,36,"length"],[156,44,135,42],[156,46,135,44,"i"],[156,47,135,45],[156,49,135,47],[156,51,135,49],[157,6,136,4],[157,12,136,10,"regex"],[157,17,136,15],[157,20,136,18],[157,24,136,22,"RegExp"],[157,30,136,28],[157,31,136,29,"DATE_PATTERNS"],[157,44,136,42],[157,45,136,43,"i"],[157,46,136,44],[157,47,136,45],[157,49,136,47],[157,53,136,51],[157,54,136,52],[158,6,137,4],[158,10,137,8,"match"],[158,15,137,13],[159,6,139,4],[159,13,139,11],[159,14,139,12,"match"],[159,19,139,17],[159,22,139,20,"regex"],[159,27,139,25],[159,28,139,26,"exec"],[159,32,139,30],[159,33,139,31,"fullText"],[159,41,139,39],[159,42,139,40],[159,48,139,46],[159,52,139,50],[159,54,139,52],[160,8,140,6],[160,14,140,12,"isoDate"],[160,21,140,19],[160,24,140,22,"parseDateToISO"],[160,38,140,36],[160,39,140,37,"match"],[160,44,140,42],[160,46,140,44,"i"],[160,47,140,45],[160,48,140,46],[161,8,141,6],[161,12,141,10,"isoDate"],[161,19,141,17],[161,21,141,19],[162,10,142,8],[162,16,142,14,"date"],[162,20,142,18],[162,23,142,21],[162,27,142,25,"Date"],[162,31,142,29],[162,32,142,30,"isoDate"],[162,39,142,37],[162,40,142,38],[163,10,143,8],[163,16,143,14,"now"],[163,19,143,17],[163,22,143,20],[163,26,143,24,"Date"],[163,30,143,28],[163,31,143,29],[163,32,143,30],[164,10,144,8],[164,16,144,14,"monthsFromNow"],[164,29,144,27],[164,32,144,30],[164,33,144,31,"date"],[164,37,144,35],[164,38,144,36,"getFullYear"],[164,49,144,47],[164,50,144,48],[164,51,144,49],[164,54,144,52,"now"],[164,57,144,55],[164,58,144,56,"getFullYear"],[164,69,144,67],[164,70,144,68],[164,71,144,69],[164,75,144,73],[164,77,144,75],[164,81,144,79,"date"],[164,85,144,83],[164,86,144,84,"getMonth"],[164,94,144,92],[164,95,144,93],[164,96,144,94],[164,99,144,97,"now"],[164,102,144,100],[164,103,144,101,"getMonth"],[164,111,144,109],[164,112,144,110],[164,113,144,111],[164,114,144,112],[166,10,146,8],[167,10,147,8],[168,10,148,8],[168,14,148,12,"score"],[168,19,148,17],[168,22,148,20],[168,23,148,21],[169,10,149,8],[169,14,149,12,"monthsFromNow"],[169,27,149,25],[169,31,149,29],[169,32,149,30],[169,36,149,34,"monthsFromNow"],[169,49,149,47],[169,53,149,51],[169,55,149,53],[169,57,149,55],[170,12,150,10,"score"],[170,17,150,15],[170,20,150,18],[170,23,150,21],[171,10,151,8],[171,11,151,9],[171,17,151,15],[171,21,151,19,"monthsFromNow"],[171,34,151,32],[171,37,151,35],[171,38,151,36],[171,42,151,40,"monthsFromNow"],[171,55,151,53],[171,58,151,56],[171,60,151,58],[171,62,151,60],[172,12,152,10,"score"],[172,17,152,15],[172,20,152,18],[172,22,152,20],[173,10,153,8],[173,11,153,9],[173,17,153,15],[173,21,153,19,"monthsFromNow"],[173,34,153,32],[173,38,153,36],[173,39,153,37],[173,41,153,39],[174,12,154,10,"score"],[174,17,154,15],[174,20,154,18],[174,22,154,20],[175,10,155,8],[176,10,157,8],[176,14,157,12,"score"],[176,19,157,17],[176,22,157,20],[176,23,157,21],[176,25,157,23],[177,12,158,10,"allDates"],[177,20,158,18],[177,21,158,19,"push"],[177,25,158,23],[177,26,158,24],[178,14,158,26,"date"],[178,18,158,30],[178,20,158,32,"isoDate"],[178,27,158,39],[179,14,158,41,"score"],[180,12,158,47],[180,13,158,48],[180,14,158,49],[181,10,159,8],[182,8,160,6],[183,6,161,4],[184,4,162,2],[186,4,164,2],[187,4,165,2],[187,8,165,6,"allDates"],[187,16,165,14],[187,17,165,15,"length"],[187,23,165,21],[187,26,165,24],[187,27,165,25],[187,29,165,27],[188,6,166,4,"allDates"],[188,14,166,12],[188,15,166,13,"sort"],[188,19,166,17],[188,20,166,18],[188,21,166,19,"a"],[188,22,166,20],[188,24,166,22,"b"],[188,25,166,23],[188,30,166,28,"b"],[188,31,166,29],[188,32,166,30,"score"],[188,37,166,35],[188,40,166,38,"a"],[188,41,166,39],[188,42,166,40,"score"],[188,47,166,45],[188,48,166,46],[189,6,167,4,"console"],[189,13,167,11],[189,14,167,12,"log"],[189,17,167,15],[189,18,167,16],[189,49,167,47],[189,51,167,49,"allDates"],[189,59,167,57],[189,60,167,58],[190,6,168,4],[190,13,168,11,"allDates"],[190,21,168,19],[190,22,168,20],[190,23,168,21],[190,24,168,22],[190,25,168,23,"date"],[190,29,168,27],[191,4,169,2],[192,4,171,2],[192,11,171,9],[192,15,171,13],[193,2,172,0],[193,3,172,1],[195,2,174,0],[196,0,175,0],[197,0,176,0],[198,2,177,0],[198,8,177,6,"saveBase64ToTempFile"],[198,28,177,26],[198,31,177,29],[198,37,177,36,"base64Data"],[198,47,177,54],[198,51,177,76],[199,4,178,2],[200,4,179,2],[200,8,179,6,"cleanBase64"],[200,19,179,17],[200,22,179,20,"base64Data"],[200,32,179,30],[201,4,180,2],[201,8,180,6,"cleanBase64"],[201,19,180,17],[201,20,180,18,"includes"],[201,28,180,26],[201,29,180,27],[201,32,180,30],[201,33,180,31],[201,35,180,33],[202,6,181,4,"cleanBase64"],[202,17,181,15],[202,20,181,18,"cleanBase64"],[202,31,181,29],[202,32,181,30,"split"],[202,37,181,35],[202,38,181,36],[202,41,181,39],[202,42,181,40],[202,43,181,41],[202,44,181,42],[202,45,181,43],[203,4,182,2],[204,4,184,2],[204,10,184,8,"fileName"],[204,18,184,16],[204,21,184,19],[204,37,184,35,"Date"],[204,41,184,39],[204,42,184,40,"now"],[204,45,184,43],[204,46,184,44],[204,47,184,45],[204,53,184,51],[205,4,185,2],[205,10,185,8,"filePath"],[205,18,185,16],[205,21,185,19],[205,24,185,22,"FileSystem"],[205,34,185,32],[205,35,185,33,"cacheDirectory"],[205,49,185,47],[205,52,185,50,"fileName"],[205,60,185,58],[205,62,185,60],[206,4,187,2],[206,10,187,8,"FileSystem"],[206,20,187,18],[206,21,187,19,"writeAsStringAsync"],[206,39,187,37],[206,40,187,38,"filePath"],[206,48,187,46],[206,50,187,48,"cleanBase64"],[206,61,187,59],[206,63,187,61],[207,6,188,4,"encoding"],[207,14,188,12],[207,16,188,14,"FileSystem"],[207,26,188,24],[207,27,188,25,"EncodingType"],[207,39,188,37],[207,40,188,38,"Base64"],[208,4,189,2],[208,5,189,3],[208,6,189,4],[209,4,191,2],[209,11,191,9,"filePath"],[209,19,191,17],[210,2,192,0],[210,3,192,1],[212,2,194,0],[213,0,195,0],[214,0,196,0],[215,2,197,7],[215,8,197,13,"extractExpiryDateFromImage"],[215,34,197,39],[215,37,197,42],[215,43,198,2,"imageBase64"],[215,54,198,21],[215,58,199,25],[216,4,200,2],[216,8,200,6],[217,6,201,4],[218,6,202,4],[218,10,202,8],[218,11,202,9,"isSupported"],[218,29,202,20],[218,30,202,20,"isSupported"],[218,41,202,20],[218,43,202,22],[219,8,203,6,"console"],[219,15,203,13],[219,16,203,14,"log"],[219,19,203,17],[219,20,203,18],[219,63,203,61],[219,64,203,62],[220,8,204,6],[220,15,204,13],[221,10,205,8,"success"],[221,17,205,15],[221,19,205,17],[221,24,205,22],[222,10,206,8,"expiryDate"],[222,20,206,18],[222,22,206,20],[222,26,206,24],[223,10,207,8,"message"],[223,17,207,15],[223,19,207,17,"Platform"],[223,27,207,25],[223,28,207,25,"default"],[223,35,207,25],[223,36,207,26,"OS"],[223,38,207,28],[223,43,207,33],[223,48,207,38],[223,51,208,12],[223,138,208,99],[223,141,209,12],[224,8,210,6],[224,9,210,7],[225,6,211,4],[227,6,213,4],[228,6,214,4],[228,12,214,10,"tempFilePath"],[228,24,214,22],[228,27,214,25],[228,33,214,31,"saveBase64ToTempFile"],[228,53,214,51],[228,54,214,52,"imageBase64"],[228,65,214,63],[228,66,214,64],[229,6,216,4,"console"],[229,13,216,11],[229,14,216,12,"log"],[229,17,216,15],[229,18,216,16],[229,41,216,39],[229,43,216,41,"tempFilePath"],[229,55,216,53],[229,56,216,54],[231,6,218,4],[232,6,219,4],[232,12,219,10,"extractedLines"],[232,26,219,24],[232,29,219,27],[232,35,219,33],[232,39,219,33,"extractTextFromImage"],[232,57,219,53],[232,58,219,53,"extractTextFromImage"],[232,78,219,53],[232,80,219,54,"tempFilePath"],[232,92,219,66],[232,93,219,67],[234,6,221,4],[235,6,222,4],[235,10,222,8],[236,8,223,6],[236,14,223,12,"FileSystem"],[236,24,223,22],[236,25,223,23,"deleteAsync"],[236,36,223,34],[236,37,223,35,"tempFilePath"],[236,49,223,47],[236,51,223,49],[237,10,223,51,"idempotent"],[237,20,223,61],[237,22,223,63],[238,8,223,68],[238,9,223,69],[238,10,223,70],[239,6,224,4],[239,7,224,5],[239,8,224,6],[239,14,224,12],[240,8,225,6],[241,6,225,6],[242,6,228,4],[242,10,228,8],[242,11,228,9,"extractedLines"],[242,25,228,23],[242,29,228,27,"extractedLines"],[242,43,228,41],[242,44,228,42,"length"],[242,50,228,48],[242,55,228,53],[242,56,228,54],[242,58,228,56],[243,8,229,6],[243,15,229,13],[244,10,230,8,"success"],[244,17,230,15],[244,19,230,17],[244,24,230,22],[245,10,231,8,"expiryDate"],[245,20,231,18],[245,22,231,20],[245,26,231,24],[246,10,232,8,"message"],[246,17,232,15],[246,19,232,17],[246,91,232,89],[247,10,233,8,"rawText"],[247,17,233,15],[247,19,233,17],[248,8,234,6],[248,9,234,7],[249,6,235,4],[250,6,237,4],[250,12,237,10,"rawText"],[250,19,237,17],[250,22,237,20,"extractedLines"],[250,36,237,34],[250,37,237,35,"join"],[250,41,237,39],[250,42,237,40],[250,46,237,44],[250,47,237,45],[251,6,238,4,"console"],[251,13,238,11],[251,14,238,12,"log"],[251,17,238,15],[251,18,238,16],[251,40,238,38],[251,42,238,40,"extractedLines"],[251,56,238,54],[251,57,238,55],[253,6,240,4],[254,6,241,4],[254,12,241,10,"expiryDate"],[254,22,241,20],[254,25,241,23,"findExpirationDate"],[254,43,241,41],[254,44,241,42,"extractedLines"],[254,58,241,56],[254,59,241,57],[255,6,243,4],[255,10,243,8,"expiryDate"],[255,20,243,18],[255,22,243,20],[256,8,244,6],[256,15,244,13],[257,10,245,8,"success"],[257,17,245,15],[257,19,245,17],[257,23,245,21],[258,10,246,8,"expiryDate"],[258,20,246,18],[259,10,247,8,"message"],[259,17,247,15],[259,19,247,17],[259,59,247,57],[260,10,248,8,"rawText"],[261,8,249,6],[261,9,249,7],[262,6,250,4],[263,6,252,4],[263,13,252,11],[264,8,253,6,"success"],[264,15,253,13],[264,17,253,15],[264,22,253,20],[265,8,254,6,"expiryDate"],[265,18,254,16],[265,20,254,18],[265,24,254,22],[266,8,255,6,"message"],[266,15,255,13],[266,17,255,15],[266,83,255,81],[267,8,256,6,"rawText"],[268,6,257,4],[268,7,257,5],[269,4,258,2],[269,5,258,3],[269,6,258,4],[269,13,258,11,"error"],[269,18,258,16],[269,20,258,18],[270,6,259,4,"console"],[270,13,259,11],[270,14,259,12,"log"],[270,17,259,15],[270,18,259,16],[270,41,259,39],[270,43,259,41,"error"],[270,48,259,46],[270,49,259,47],[271,6,260,4],[271,13,260,11],[272,8,261,6,"success"],[272,15,261,13],[272,17,261,15],[272,22,261,20],[273,8,262,6,"expiryDate"],[273,18,262,16],[273,20,262,18],[273,24,262,22],[274,8,263,6,"message"],[274,15,263,13],[274,17,263,15],[275,6,264,4],[275,7,264,5],[276,4,265,2],[277,2,266,0],[277,3,266,1],[278,0,266,2],[278,3]],"functionMap":{"names":["<global>","parseDateToISO","findExpirationDate","allDates.sort$argument_0","saveBase64ToTempFile","extractExpiryDateFromImage"],"mappings":"AAA;uBCsD;CD6C;2BEK;kBC6D,2BD;CFM;6BIK;CJe;0CKK;CLqE"},"hasCjsExports":false},"type":"js/module"}]}