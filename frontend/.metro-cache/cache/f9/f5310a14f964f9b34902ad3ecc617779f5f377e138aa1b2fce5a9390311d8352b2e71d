{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":69,"index":110}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"getDeviceId\", {\n    enumerable: true,\n    get: function () {\n      return getDeviceId;\n    }\n  });\n  Object.defineProperty(exports, \"trackEvent\", {\n    enumerable: true,\n    get: function () {\n      return trackEvent;\n    }\n  });\n  Object.defineProperty(exports, \"trackAppOpen\", {\n    enumerable: true,\n    get: function () {\n      return trackAppOpen;\n    }\n  });\n  Object.defineProperty(exports, \"trackAdClick\", {\n    enumerable: true,\n    get: function () {\n      return trackAdClick;\n    }\n  });\n  Object.defineProperty(exports, \"trackAffiliateClick\", {\n    enumerable: true,\n    get: function () {\n      return trackAffiliateClick;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  const BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const DEVICE_ID_KEY = \"@optical_rx_device_id\";\n\n  // Generate or retrieve a persistent device ID\n  const getDeviceId = async () => {\n    try {\n      let deviceId = await AsyncStorage.default.getItem(DEVICE_ID_KEY);\n      if (!deviceId) {\n        // Generate a unique ID for this device\n        deviceId = `${Platform.default.OS}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        await AsyncStorage.default.setItem(DEVICE_ID_KEY, deviceId);\n      }\n      return deviceId;\n    } catch {\n      return `temp-${Date.now()}`;\n    }\n  };\n\n  // Track analytics event\n  const trackEvent = async (eventType, metadata) => {\n    try {\n      const deviceId = await getDeviceId();\n      const platform = Platform.default.OS; // 'ios', 'android', or 'web'\n\n      await fetch(`${BACKEND_URL}/api/analytics/track`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          device_id: deviceId,\n          event_type: eventType,\n          platform: platform,\n          app_version: \"1.0.0\",\n          metadata: metadata\n        })\n      });\n    } catch (error) {\n      // Silently fail - don't interrupt user experience\n      console.log(\"Analytics error:\", error);\n    }\n  };\n\n  // Track app open (call on app launch)\n  const trackAppOpen = () => trackEvent(\"app_open\");\n\n  // Track ad click\n  const trackAdClick = adId => trackEvent(\"ad_click\", {\n    ad_id: adId\n  });\n\n  // Track affiliate click\n  const trackAffiliateClick = partnerId => trackEvent(\"affiliate_click\", {\n    partner_id: partnerId\n  });\n});","lineCount":102,"map":[[12,2,8,0,"Object"],[12,8,8,0],[12,9,8,0,"defineProperty"],[12,23,8,0],[12,24,8,0,"exports"],[12,31,8,0],[13,4,8,0,"enumerable"],[13,14,8,0],[14,4,8,0,"get"],[14,7,8,0],[14,18,8,0,"get"],[14,19,8,0],[15,6,8,0],[15,13,8,0,"getDeviceId"],[15,24,8,0],[16,4,8,0],[17,2,8,0],[18,2,23,0,"Object"],[18,8,23,0],[18,9,23,0,"defineProperty"],[18,23,23,0],[18,24,23,0,"exports"],[18,31,23,0],[19,4,23,0,"enumerable"],[19,14,23,0],[20,4,23,0,"get"],[20,7,23,0],[20,18,23,0,"get"],[20,19,23,0],[21,6,23,0],[21,13,23,0,"trackEvent"],[21,23,23,0],[22,4,23,0],[23,2,23,0],[24,2,49,0,"Object"],[24,8,49,0],[24,9,49,0,"defineProperty"],[24,23,49,0],[24,24,49,0,"exports"],[24,31,49,0],[25,4,49,0,"enumerable"],[25,14,49,0],[26,4,49,0,"get"],[26,7,49,0],[26,18,49,0,"get"],[26,19,49,0],[27,6,49,0],[27,13,49,0,"trackAppOpen"],[27,25,49,0],[28,4,49,0],[29,2,49,0],[30,2,52,0,"Object"],[30,8,52,0],[30,9,52,0,"defineProperty"],[30,23,52,0],[30,24,52,0,"exports"],[30,31,52,0],[31,4,52,0,"enumerable"],[31,14,52,0],[32,4,52,0,"get"],[32,7,52,0],[32,18,52,0,"get"],[32,19,52,0],[33,6,52,0],[33,13,52,0,"trackAdClick"],[33,25,52,0],[34,4,52,0],[35,2,52,0],[36,2,55,0,"Object"],[36,8,55,0],[36,9,55,0,"defineProperty"],[36,23,55,0],[36,24,55,0,"exports"],[36,31,55,0],[37,4,55,0,"enumerable"],[37,14,55,0],[38,4,55,0,"get"],[38,7,55,0],[38,18,55,0,"get"],[38,19,55,0],[39,6,55,0],[39,13,55,0,"trackAffiliateClick"],[39,32,55,0],[40,4,55,0],[41,2,55,0],[42,2,56,59],[42,6,56,59,"_expoVirtualEnv"],[42,21,56,59],[42,24,56,59,"require"],[42,31,56,59],[42,32,56,59,"_dependencyMap"],[42,46,56,59],[43,2,56,59],[43,6,56,59,"_reactNativeWebDistExportsPlatform"],[43,40,56,59],[43,43,56,59,"require"],[43,50,56,59],[43,51,56,59,"_dependencyMap"],[43,65,56,59],[44,2,56,59],[44,6,56,59,"Platform"],[44,14,56,59],[44,17,56,59,"_interopDefault"],[44,32,56,59],[44,33,56,59,"_reactNativeWebDistExportsPlatform"],[44,67,56,59],[45,2,2,0],[45,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[45,42,2,0],[45,45,2,0,"require"],[45,52,2,0],[45,53,2,0,"_dependencyMap"],[45,67,2,0],[46,2,2,0],[46,6,2,0,"AsyncStorage"],[46,18,2,0],[46,21,2,0,"_interopDefault"],[46,36,2,0],[46,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[46,73,2,0],[47,2,4,0],[47,8,4,6,"BACKEND_URL"],[47,19,4,17],[47,22,4,17,"_expoVirtualEnv"],[47,37,4,17],[47,38,4,17,"env"],[47,41,4,17],[47,42,4,17,"EXPO_PUBLIC_BACKEND_URL"],[47,65,4,55],[48,2,5,0],[48,8,5,6,"DEVICE_ID_KEY"],[48,21,5,19],[48,24,5,22],[48,47,5,45],[50,2,7,0],[51,2,8,7],[51,8,8,13,"getDeviceId"],[51,19,8,24],[51,22,8,27],[51,28,8,27,"getDeviceId"],[51,29,8,27],[51,34,8,56],[52,4,9,2],[52,8,9,6],[53,6,10,4],[53,10,10,8,"deviceId"],[53,18,10,16],[53,21,10,19],[53,27,10,25,"AsyncStorage"],[53,39,10,37],[53,40,10,37,"default"],[53,47,10,37],[53,48,10,38,"getItem"],[53,55,10,45],[53,56,10,46,"DEVICE_ID_KEY"],[53,69,10,59],[53,70,10,60],[54,6,11,4],[54,10,11,8],[54,11,11,9,"deviceId"],[54,19,11,17],[54,21,11,19],[55,8,12,6],[56,8,13,6,"deviceId"],[56,16,13,14],[56,19,13,17],[56,22,13,20,"Platform"],[56,30,13,28],[56,31,13,28,"default"],[56,38,13,28],[56,39,13,29,"OS"],[56,41,13,31],[56,45,13,35,"Date"],[56,49,13,39],[56,50,13,40,"now"],[56,53,13,43],[56,54,13,44],[56,55,13,45],[56,59,13,49,"Math"],[56,63,13,53],[56,64,13,54,"random"],[56,70,13,60],[56,71,13,61],[56,72,13,62],[56,73,13,63,"toString"],[56,81,13,71],[56,82,13,72],[56,84,13,74],[56,85,13,75],[56,86,13,76,"substr"],[56,92,13,82],[56,93,13,83],[56,94,13,84],[56,96,13,86],[56,97,13,87],[56,98,13,88],[56,100,13,90],[57,8,14,6],[57,14,14,12,"AsyncStorage"],[57,26,14,24],[57,27,14,24,"default"],[57,34,14,24],[57,35,14,25,"setItem"],[57,42,14,32],[57,43,14,33,"DEVICE_ID_KEY"],[57,56,14,46],[57,58,14,48,"deviceId"],[57,66,14,56],[57,67,14,57],[58,6,15,4],[59,6,16,4],[59,13,16,11,"deviceId"],[59,21,16,19],[60,4,17,2],[60,5,17,3],[60,6,17,4],[60,12,17,10],[61,6,18,4],[61,13,18,11],[61,21,18,19,"Date"],[61,25,18,23],[61,26,18,24,"now"],[61,29,18,27],[61,30,18,28],[61,31,18,29],[61,33,18,31],[62,4,19,2],[63,2,20,0],[63,3,20,1],[65,2,22,0],[66,2,23,7],[66,8,23,13,"trackEvent"],[66,18,23,23],[66,21,23,26],[66,27,23,26,"trackEvent"],[66,28,24,2,"eventType"],[66,37,24,56],[66,39,25,2,"metadata"],[66,47,25,32],[66,52,26,5],[67,4,27,2],[67,8,27,6],[68,6,28,4],[68,12,28,10,"deviceId"],[68,20,28,18],[68,23,28,21],[68,29,28,27,"getDeviceId"],[68,40,28,38],[68,41,28,39],[68,42,28,40],[69,6,29,4],[69,12,29,10,"platform"],[69,20,29,18],[69,23,29,21,"Platform"],[69,31,29,29],[69,32,29,29,"default"],[69,39,29,29],[69,40,29,30,"OS"],[69,42,29,32],[69,43,29,33],[69,44,29,34],[71,6,31,4],[71,12,31,10,"fetch"],[71,17,31,15],[71,18,31,16],[71,21,31,19,"BACKEND_URL"],[71,32,31,30],[71,54,31,52],[71,56,31,54],[72,8,32,6,"method"],[72,14,32,12],[72,16,32,14],[72,22,32,20],[73,8,33,6,"headers"],[73,15,33,13],[73,17,33,15],[74,10,33,17],[74,24,33,31],[74,26,33,33],[75,8,33,52],[75,9,33,53],[76,8,34,6,"body"],[76,12,34,10],[76,14,34,12,"JSON"],[76,18,34,16],[76,19,34,17,"stringify"],[76,28,34,26],[76,29,34,27],[77,10,35,8,"device_id"],[77,19,35,17],[77,21,35,19,"deviceId"],[77,29,35,27],[78,10,36,8,"event_type"],[78,20,36,18],[78,22,36,20,"eventType"],[78,31,36,29],[79,10,37,8,"platform"],[79,18,37,16],[79,20,37,18,"platform"],[79,28,37,26],[80,10,38,8,"app_version"],[80,21,38,19],[80,23,38,21],[80,30,38,28],[81,10,39,8,"metadata"],[81,18,39,16],[81,20,39,18,"metadata"],[82,8,40,6],[82,9,40,7],[83,6,41,4],[83,7,41,5],[83,8,41,6],[84,4,42,2],[84,5,42,3],[84,6,42,4],[84,13,42,11,"error"],[84,18,42,16],[84,20,42,18],[85,6,43,4],[86,6,44,4,"console"],[86,13,44,11],[86,14,44,12,"log"],[86,17,44,15],[86,18,44,16],[86,36,44,34],[86,38,44,36,"error"],[86,43,44,41],[86,44,44,42],[87,4,45,2],[88,2,46,0],[88,3,46,1],[90,2,48,0],[91,2,49,7],[91,8,49,13,"trackAppOpen"],[91,20,49,25],[91,23,49,28,"trackAppOpen"],[91,24,49,28],[91,29,49,34,"trackEvent"],[91,39,49,44],[91,40,49,45],[91,50,49,55],[91,51,49,56],[93,2,51,0],[94,2,52,7],[94,8,52,13,"trackAdClick"],[94,20,52,25],[94,23,52,29,"adId"],[94,27,52,42],[94,31,52,47,"trackEvent"],[94,41,52,57],[94,42,52,58],[94,52,52,68],[94,54,52,70],[95,4,52,72,"ad_id"],[95,9,52,77],[95,11,52,79,"adId"],[96,2,52,84],[96,3,52,85],[96,4,52,86],[98,2,54,0],[99,2,55,7],[99,8,55,13,"trackAffiliateClick"],[99,27,55,32],[99,30,55,36,"partnerId"],[99,39,55,53],[99,43,56,2,"trackEvent"],[99,53,56,12],[99,54,56,13],[99,71,56,30],[99,73,56,32],[100,4,56,34,"partner_id"],[100,14,56,44],[100,16,56,46,"partnerId"],[101,2,56,56],[101,3,56,57],[101,4,56,58],[102,0,56,59],[102,3]],"functionMap":{"names":["<global>","getDeviceId","trackEvent","trackAppOpen","trackAdClick","trackAffiliateClick"],"mappings":"AAA;2BCO;CDY;0BEG;CFuB;4BGG,4BH;4BIG,0DJ;mCKG;0DLC"},"hasCjsExports":false},"type":"js/module"}]}