{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":90},"end":{"line":3,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"getDeviceId\", {\n    enumerable: true,\n    get: function () {\n      return getDeviceId;\n    }\n  });\n  Object.defineProperty(exports, \"trackEvent\", {\n    enumerable: true,\n    get: function () {\n      return trackEvent;\n    }\n  });\n  Object.defineProperty(exports, \"trackAppOpen\", {\n    enumerable: true,\n    get: function () {\n      return trackAppOpen;\n    }\n  });\n  Object.defineProperty(exports, \"trackAdClick\", {\n    enumerable: true,\n    get: function () {\n      return trackAdClick;\n    }\n  });\n  Object.defineProperty(exports, \"trackAffiliateClick\", {\n    enumerable: true,\n    get: function () {\n      return trackAffiliateClick;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  const BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const DEVICE_ID_KEY = \"@optical_rx_device_id\";\n\n  // Generate or retrieve a persistent device ID\n  const getDeviceId = async () => {\n    try {\n      let deviceId = await AsyncStorage.default.getItem(DEVICE_ID_KEY);\n      if (!deviceId) {\n        // Generate a unique ID for this device\n        deviceId = `${Platform.default.OS}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        await AsyncStorage.default.setItem(DEVICE_ID_KEY, deviceId);\n      }\n      return deviceId;\n    } catch {\n      return `temp-${Date.now()}`;\n    }\n  };\n\n  // Track analytics event\n  const trackEvent = async (eventType, metadata) => {\n    try {\n      const deviceId = await getDeviceId();\n      const platform = Platform.default.OS; // 'ios', 'android', or 'web'\n\n      await fetch(`${BACKEND_URL}/api/analytics/track`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          device_id: deviceId,\n          event_type: eventType,\n          platform: platform,\n          app_version: \"1.0.0\",\n          metadata: metadata\n        })\n      });\n    } catch (error) {\n      // Silently fail - don't interrupt user experience\n      console.log(\"Analytics error:\", error);\n    }\n  };\n\n  // Track app open (call on app launch)\n  const trackAppOpen = () => trackEvent(\"app_open\");\n\n  // Track ad click\n  const trackAdClick = adId => trackEvent(\"ad_click\", {\n    ad_id: adId\n  });\n\n  // Track affiliate click\n  const trackAffiliateClick = partnerId => trackEvent(\"affiliate_click\", {\n    partner_id: partnerId\n  });\n});","lineCount":102,"map":[[12,2,9,0,"Object"],[12,8,9,0],[12,9,9,0,"defineProperty"],[12,23,9,0],[12,24,9,0,"exports"],[12,31,9,0],[13,4,9,0,"enumerable"],[13,14,9,0],[14,4,9,0,"get"],[14,7,9,0],[14,18,9,0,"get"],[14,19,9,0],[15,6,9,0],[15,13,9,0,"getDeviceId"],[15,24,9,0],[16,4,9,0],[17,2,9,0],[18,2,24,0,"Object"],[18,8,24,0],[18,9,24,0,"defineProperty"],[18,23,24,0],[18,24,24,0,"exports"],[18,31,24,0],[19,4,24,0,"enumerable"],[19,14,24,0],[20,4,24,0,"get"],[20,7,24,0],[20,18,24,0,"get"],[20,19,24,0],[21,6,24,0],[21,13,24,0,"trackEvent"],[21,23,24,0],[22,4,24,0],[23,2,24,0],[24,2,50,0,"Object"],[24,8,50,0],[24,9,50,0,"defineProperty"],[24,23,50,0],[24,24,50,0,"exports"],[24,31,50,0],[25,4,50,0,"enumerable"],[25,14,50,0],[26,4,50,0,"get"],[26,7,50,0],[26,18,50,0,"get"],[26,19,50,0],[27,6,50,0],[27,13,50,0,"trackAppOpen"],[27,25,50,0],[28,4,50,0],[29,2,50,0],[30,2,53,0,"Object"],[30,8,53,0],[30,9,53,0,"defineProperty"],[30,23,53,0],[30,24,53,0,"exports"],[30,31,53,0],[31,4,53,0,"enumerable"],[31,14,53,0],[32,4,53,0,"get"],[32,7,53,0],[32,18,53,0,"get"],[32,19,53,0],[33,6,53,0],[33,13,53,0,"trackAdClick"],[33,25,53,0],[34,4,53,0],[35,2,53,0],[36,2,56,0,"Object"],[36,8,56,0],[36,9,56,0,"defineProperty"],[36,23,56,0],[36,24,56,0,"exports"],[36,31,56,0],[37,4,56,0,"enumerable"],[37,14,56,0],[38,4,56,0,"get"],[38,7,56,0],[38,18,56,0,"get"],[38,19,56,0],[39,6,56,0],[39,13,56,0,"trackAffiliateClick"],[39,32,56,0],[40,4,56,0],[41,2,56,0],[42,2,57,59],[42,6,57,59,"_expoVirtualEnv"],[42,21,57,59],[42,24,57,59,"require"],[42,31,57,59],[42,32,57,59,"_dependencyMap"],[42,46,57,59],[43,2,57,59],[43,6,57,59,"_reactNativeWebDistExportsPlatform"],[43,40,57,59],[43,43,57,59,"require"],[43,50,57,59],[43,51,57,59,"_dependencyMap"],[43,65,57,59],[44,2,57,59],[44,6,57,59,"Platform"],[44,14,57,59],[44,17,57,59,"_interopDefault"],[44,32,57,59],[44,33,57,59,"_reactNativeWebDistExportsPlatform"],[44,67,57,59],[45,2,3,0],[45,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[45,42,3,0],[45,45,3,0,"require"],[45,52,3,0],[45,53,3,0,"_dependencyMap"],[45,67,3,0],[46,2,3,0],[46,6,3,0,"AsyncStorage"],[46,18,3,0],[46,21,3,0,"_interopDefault"],[46,36,3,0],[46,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[46,73,3,0],[47,2,5,0],[47,8,5,6,"BACKEND_URL"],[47,19,5,17],[47,22,5,17,"_expoVirtualEnv"],[47,37,5,17],[47,38,5,17,"env"],[47,41,5,17],[47,42,5,17,"EXPO_PUBLIC_BACKEND_URL"],[47,65,5,55],[48,2,6,0],[48,8,6,6,"DEVICE_ID_KEY"],[48,21,6,19],[48,24,6,22],[48,47,6,45],[50,2,8,0],[51,2,9,7],[51,8,9,13,"getDeviceId"],[51,19,9,24],[51,22,9,27],[51,28,9,27,"getDeviceId"],[51,29,9,27],[51,34,9,56],[52,4,10,2],[52,8,10,6],[53,6,11,4],[53,10,11,8,"deviceId"],[53,18,11,16],[53,21,11,19],[53,27,11,25,"AsyncStorage"],[53,39,11,37],[53,40,11,37,"default"],[53,47,11,37],[53,48,11,38,"getItem"],[53,55,11,45],[53,56,11,46,"DEVICE_ID_KEY"],[53,69,11,59],[53,70,11,60],[54,6,12,4],[54,10,12,8],[54,11,12,9,"deviceId"],[54,19,12,17],[54,21,12,19],[55,8,13,6],[56,8,14,6,"deviceId"],[56,16,14,14],[56,19,14,17],[56,22,14,20,"Platform"],[56,30,14,28],[56,31,14,28,"default"],[56,38,14,28],[56,39,14,29,"OS"],[56,41,14,31],[56,45,14,35,"Date"],[56,49,14,39],[56,50,14,40,"now"],[56,53,14,43],[56,54,14,44],[56,55,14,45],[56,59,14,49,"Math"],[56,63,14,53],[56,64,14,54,"random"],[56,70,14,60],[56,71,14,61],[56,72,14,62],[56,73,14,63,"toString"],[56,81,14,71],[56,82,14,72],[56,84,14,74],[56,85,14,75],[56,86,14,76,"substr"],[56,92,14,82],[56,93,14,83],[56,94,14,84],[56,96,14,86],[56,97,14,87],[56,98,14,88],[56,100,14,90],[57,8,15,6],[57,14,15,12,"AsyncStorage"],[57,26,15,24],[57,27,15,24,"default"],[57,34,15,24],[57,35,15,25,"setItem"],[57,42,15,32],[57,43,15,33,"DEVICE_ID_KEY"],[57,56,15,46],[57,58,15,48,"deviceId"],[57,66,15,56],[57,67,15,57],[58,6,16,4],[59,6,17,4],[59,13,17,11,"deviceId"],[59,21,17,19],[60,4,18,2],[60,5,18,3],[60,6,18,4],[60,12,18,10],[61,6,19,4],[61,13,19,11],[61,21,19,19,"Date"],[61,25,19,23],[61,26,19,24,"now"],[61,29,19,27],[61,30,19,28],[61,31,19,29],[61,33,19,31],[62,4,20,2],[63,2,21,0],[63,3,21,1],[65,2,23,0],[66,2,24,7],[66,8,24,13,"trackEvent"],[66,18,24,23],[66,21,24,26],[66,27,24,26,"trackEvent"],[66,28,25,2,"eventType"],[66,37,25,56],[66,39,26,2,"metadata"],[66,47,26,32],[66,52,27,5],[67,4,28,2],[67,8,28,6],[68,6,29,4],[68,12,29,10,"deviceId"],[68,20,29,18],[68,23,29,21],[68,29,29,27,"getDeviceId"],[68,40,29,38],[68,41,29,39],[68,42,29,40],[69,6,30,4],[69,12,30,10,"platform"],[69,20,30,18],[69,23,30,21,"Platform"],[69,31,30,29],[69,32,30,29,"default"],[69,39,30,29],[69,40,30,30,"OS"],[69,42,30,32],[69,43,30,33],[69,44,30,34],[71,6,32,4],[71,12,32,10,"fetch"],[71,17,32,15],[71,18,32,16],[71,21,32,19,"BACKEND_URL"],[71,32,32,30],[71,54,32,52],[71,56,32,54],[72,8,33,6,"method"],[72,14,33,12],[72,16,33,14],[72,22,33,20],[73,8,34,6,"headers"],[73,15,34,13],[73,17,34,15],[74,10,34,17],[74,24,34,31],[74,26,34,33],[75,8,34,52],[75,9,34,53],[76,8,35,6,"body"],[76,12,35,10],[76,14,35,12,"JSON"],[76,18,35,16],[76,19,35,17,"stringify"],[76,28,35,26],[76,29,35,27],[77,10,36,8,"device_id"],[77,19,36,17],[77,21,36,19,"deviceId"],[77,29,36,27],[78,10,37,8,"event_type"],[78,20,37,18],[78,22,37,20,"eventType"],[78,31,37,29],[79,10,38,8,"platform"],[79,18,38,16],[79,20,38,18,"platform"],[79,28,38,26],[80,10,39,8,"app_version"],[80,21,39,19],[80,23,39,21],[80,30,39,28],[81,10,40,8,"metadata"],[81,18,40,16],[81,20,40,18,"metadata"],[82,8,41,6],[82,9,41,7],[83,6,42,4],[83,7,42,5],[83,8,42,6],[84,4,43,2],[84,5,43,3],[84,6,43,4],[84,13,43,11,"error"],[84,18,43,16],[84,20,43,18],[85,6,44,4],[86,6,45,4,"console"],[86,13,45,11],[86,14,45,12,"log"],[86,17,45,15],[86,18,45,16],[86,36,45,34],[86,38,45,36,"error"],[86,43,45,41],[86,44,45,42],[87,4,46,2],[88,2,47,0],[88,3,47,1],[90,2,49,0],[91,2,50,7],[91,8,50,13,"trackAppOpen"],[91,20,50,25],[91,23,50,28,"trackAppOpen"],[91,24,50,28],[91,29,50,34,"trackEvent"],[91,39,50,44],[91,40,50,45],[91,50,50,55],[91,51,50,56],[93,2,52,0],[94,2,53,7],[94,8,53,13,"trackAdClick"],[94,20,53,25],[94,23,53,29,"adId"],[94,27,53,42],[94,31,53,47,"trackEvent"],[94,41,53,57],[94,42,53,58],[94,52,53,68],[94,54,53,70],[95,4,53,72,"ad_id"],[95,9,53,77],[95,11,53,79,"adId"],[96,2,53,84],[96,3,53,85],[96,4,53,86],[98,2,55,0],[99,2,56,7],[99,8,56,13,"trackAffiliateClick"],[99,27,56,32],[99,30,56,36,"partnerId"],[99,39,56,53],[99,43,57,2,"trackEvent"],[99,53,57,12],[99,54,57,13],[99,71,57,30],[99,73,57,32],[100,4,57,34,"partner_id"],[100,14,57,44],[100,16,57,46,"partnerId"],[101,2,57,56],[101,3,57,57],[101,4,57,58],[102,0,57,59],[102,3]],"functionMap":{"names":["<global>","getDeviceId","trackEvent","trackAppOpen","trackAdClick","trackAffiliateClick"],"mappings":"AAA;2BCQ;CDY;0BEG;CFuB;4BGG,4BH;4BIG,0DJ;mCKG;0DLC"},"hasCjsExports":false},"type":"js/module"}]}